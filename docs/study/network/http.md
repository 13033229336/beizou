# HTTP 知识点

## HTTP 和 HTTPS

**HTTP:超文本传输协议，**是一个客户端和服务端请求和应答的标准（TCP），可以使浏览器更加高效，使网络传输减少。
## 缺点
1. 明文通信，数据不安全，容易被窃听
2. 不验证通信方的身份，可能遭遇伪装
3. 无法保证报文的完整性，可能遭遇篡改

**HTTPS：HTTP的安全版，即HTTP下加入了SSL层**

HTTPS协议的作用：

- 建立一个信息安全通道，保证数据传输的安全
- 确认网站的安全性

**区别：**

1. http是超文本协议，信息是明文传输，而https是具有安全性的ssl加密传输协议
2. http和https的端口不同，前者是80，后者是443
3. http是无状态连接；https是由ssl+http协议构建的可进行加密传输、身份认证协议，比http安全
4. http通过tcp建立连接，客户端和服务器交换3个包；而https除了TCP还要加上ssl握手的9个包，比HTTP消耗更多的网络资源。

### HTTPS的优缺点

优点

1. 使用HTTPS协议可认证用户和服务器，确保数据发送到正确的客户机和服务器
2. 比HTTP安全，可防止数据在传输中不被窃取，篡改，能保证数据的完整性
3. HTTPS是现在最安全的解决方案，尽管不是绝对安全，但他会大幅增加攻击成本

缺点

1. SEO 方面：使页面加载时间延长，增加数据的开销和功耗；加密范围有限，在黑客攻击、数据劫持等方面作用不大
2. 经济成本高:个人网站、小网站没有必要补办不会用，大流量网站如非必要也不会采用，成本太高；

### https加密过程
1. 客户端发起握手请求
2. 服务端收到请求，向客户端返回证书公钥（包含证书的颁发机构，过期时间等）
3. 客户端验证证书的有效性，如果无效，弹出警告框；如果有效，生成一个随机值，用证书公钥加密（对称加密）这个随机数，然后发送给服务端
4. 服务端用私钥解密，然后把内容通过该随机值进行对称加密，发送给客户端
5. 客户端解密信息，获取内容


## HTTP1.0 、 HTTP1.1 和 HTTP2.0的区别

### HTTP1.0 和 HTTP1.1

1. 缓存处理

   http1.0 是if-Modified-Since,Expires

   http1.0 引入 etag/if-None-Match

2. 带宽优化及网络连接的使用

   1.0存在浪费带宽的现象，比如客户端只需要某个对象的某些部分，但服务器将整个对象传输过来。

   1.1在头部添加了Content-range字段，允许只请求资源的某个部分，返回状态码206。

3. 错误通知

    新增了24个错误状态响应码，409，410

4. Host头处理

   1.0中认为每台服务器都绑定一个唯一的ip地址，URL中不存在主机名。但随着虚拟主机技术发展，一台物理服务器可以存在多个虚拟主机共享一个ip

   1.1请求消息和响应消息都支持HOST头域，没有会报错

5. 长连接

   1.0每次请求都要创建连接

   1.1一个TCP连接可以传送多个http请求个响应

## HTTP2有哪些改进

- 头部压缩

  因为http1.x的头部带有的大量信息，每次都要重复发送，HTTP2.0使用encoder来减少需要传输的header大小，通讯双方各自有cache一份头部文件表，即避免了重复header传输，也减少需要传输的大小。

- **多路复用**。

  HTTP1.1使用了**并发连接**和**域名分片**的方式解决头阻塞，但是没有根本上解决这个问题。只是增加了TCP连接，分摊风险，多条TCP连接会竞争有限的带宽，让真正优先级高的请求不能优先处理

  HTTP2.0把报文全部换成二进制格式，方便机器的解析成二进制帧，不存在先后顺序，也不会排队等待，解决了HTTP头阻塞

- 服务器推送

  在HTTP2.0中，服务器已经不再是完全被动的接收请求，响应请求

  